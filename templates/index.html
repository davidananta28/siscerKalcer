<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistem Pakar Diagnosa Lung Cancer</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <h2 class="text-center header-title">
            Diagnosa Risiko Kanker Paru-Paru
          </h2>
          <p class="text-center text-muted mb-4">
            Menggunakan Metode Fuzzy Logic (Mamdani)
          </p>

          <!-- TAMPILAN HASIL -->
          {% if result %} {% if result.error %}
          <div class="alert alert-danger">{{ result.error }}</div>
          {% else %}
          <div class="result-box {{ result.css_class }}">
            <h4>Hasil Diagnosa:</h4>
            <h2 class="fw-bold">{{ result.status }}</h2>
            <p class="mb-0">
              Skor Fuzzy: <strong>{{ result.score }}</strong> / 100
            </p>
            <hr />
            <small class="text-muted">
              Umur: {{ result.details.age }} | Skor Gejala: {{
              result.details.gejala_score }} | Skor Risiko: {{
              result.details.risiko_score }}
            </small>
            <div class="mt-3">
              <a href="/" class="btn btn-outline-dark btn-sm">Cek Ulang</a>
            </div>
          </div>
          {% endif %} {% else %}

          <!-- FORM INPUT -->
          <form method="POST" action="/">
            <!-- SECTION 1: PROFIL -->
            <div class="form-section">
              <h5 class="section-title">1. Profil Pasien</h5>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label class="form-label">Umur (Tahun)</label>
                  <input
                    type="number"
                    name="AGE"
                    class="form-control"
                    placeholder="Contoh: 45"
                    required
                    min="1"
                    max="100"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Gender</label>
                  <select name="GENDER" class="form-select">
                    <option value="0">Perempuan</option>
                    <option value="1">Laki-laki</option>
                  </select>
                  <small class="text-muted"
                    >*Hanya sebagai faktor risiko minor</small
                  >
                </div>
              </div>
            </div>

            <!-- SECTION 2: GEJALA FISIK -->
            <div class="form-section">
              <h5 class="section-title">2. Gejala yang Dirasakan</h5>
              <p class="text-muted small">
                Pilih "Ya" jika Anda merasakan gejala berikut:
              </p>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label>Batuk (Coughing)</label>
                  <select name="COUGHING" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Sesak Napas (Shortness of Breath)</label>
                  <select name="SHORTNESS_OF_BREATH" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Mengi (Wheezing)</label>
                  <select name="WHEEZING" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Nyeri Dada (Chest Pain)</label>
                  <select name="CHEST_PAIN" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Sulit Menelan (Swallowing Difficulty)</label>
                  <select name="SWALLOWING_DIFFICULTY" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Kelelahan (Fatigue)</label>
                  <select name="FATIGUE" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- SECTION 3: FAKTOR RISIKO -->
            <div class="form-section">
              <h5 class="section-title">3. Faktor Risiko & Gaya Hidup</h5>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label>Merokok (Smoking)</label>
                  <select name="SMOKING" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Jari Kuning (Yellow Fingers)</label>
                  <select name="YELLOW_FINGERS" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Kecemasan (Anxiety)</label>
                  <select name="ANXIETY" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Tekanan Teman Sebaya (Peer Pressure)</label>
                  <select name="PEER_PRESSURE" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Penyakit Kronis Lain</label>
                  <select name="CHRONIC_DISEASE" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Alergi (Allergy)</label>
                  <select name="ALLERGY" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label>Konsumsi Alkohol</label>
                  <select name="ALCOHOL_CONSUMING" class="form-select">
                    <option value="0">Tidak</option>
                    <option value="1">Ya</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary btn-lg">
                Analisis Sekarang
              </button>
            </div>
          </form>
          {% endif %}
        </div>
      </div>
    </div>
  </body>
</html>
